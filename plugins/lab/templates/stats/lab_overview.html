{% extends 'static_base.html' %}
{% block title %}
Lab overview
{% endblock %}
{% block page_content %}
<div class="container-fluid">
  <div class="row">
    <div style="padding-right: 90px;" class="col-md-12">
      <div id="six-month-line-graph">
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <table class="table content-offset">
        <tr>
          <th></th>
          {% for start_date, _ in view.date_ranges %}
          <th>{{ start_date.month }}/{{ start_date.year }}</th>
          {% endfor %}
        </tr>
        {{ table_data.3 }}
        {% for row_set in table_data %}
          {% for rows in row_set %}
          <tr>
            {% for row in rows.values %}
            <td {% if not row %}class="text-muted"{% endif %}>{{ row }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
          <tr>
            <td>&nbsp</td>
            {% for _ in view.date_ranges %}
            <td>&nbsp</td>
            {% endfor %}
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 text-center content-offset-below">
      <form method="post" target="_blank">
        {% csrf_token %}
        <button type="submit" class="btn btn-secondary btn-lg">
          <span class="glyphicon glyphicon-download"></span>
          Download this data
        </button>
      </form>
    </div>
  </div>
</div>
<script>
c3.generate({
  bindto: '#six-month-line-graph',
  data: {
    x: 'x',
    columns: {{ graph_data | safe }}
  },
  axis: {
      x: {
          type: 'timeseries',
          tick: {
              format: '%m/%Y'
          }
      }
  }
});
</script>
{% endblock %}